# api-wiki-springboot

API Wiki Project for SpringBoot.

# 2. 数据库设计

![E-R 图](/doc/images/database.png)

## 2.1 用户表 user

|   名称   |     类型     | 主键  | 外键  | 非空  | 默认值 |   索引   |                注释                |
| :------: | :----------: | :---: | :---: | :---: | :----: | :------: | :--------------------------------: |
|    id    |   int(11)    |   √   |       |   √   |        | 主键索引 |              用户编号              |
|   name   | varchar(255) |       |       |   √   |        |          |               用户名               |
| password | varchar(255) |       |       |   √   |        |          |                密码                |
|  email   | varchar(255) |       |       |   √   |        | 唯一索引 |                邮箱                |
|   type   |  tinyint(4)  |       |       |       |   1    |          | 用户类型：0-系统管理员，1-普通用户 |
|   salt   |   char(11)   |       |       |   √   |        |          |              随机加盐              |
|   uuid   |   char(36)   |       |       |   √   |        |          |              预留字段              |

## 2.2 项目表 project

|    名称     |     类型     | 主键  | 外键  | 非空  | 默认值 |   索引   |       注释       |
| :---------: | :----------: | :---: | :---: | :---: | :----: | :------: | :--------------: |
|     id      |   int(11)    |   √   |       |   √   |        | 主键索引 |     项目编号     |
|    name     | varchar(255) |       |       |   √   |        | 唯一索引 |     项目名称     |
| description | varchar(255) |       |       |       | 空描述 |          |     项目描述     |
|    uuid     |   char(36)   |       |       |   √   |        |          | 生成项目访问地址 |

## 2.3 用户项目关系表 user_project

|    名称    |  类型   | 主键  | 外键  | 非空  | 默认值 |   索引   |   注释   |
| :--------: | :-----: | :---: | :---: | :---: | :----: | :------: | :------: |
|     id     | int(11) |   √   |       |   √   |        | 主键索引 | 自增主键 |
|  user_id   | int(11) |       |   √   |   √   |        |          | 用户编号 |
| project_id | int(11) |       |   √   |   √   |        |          | 项目编号 |

## 2.4 文章表 article

|    名称    |     类型     | 主键  | 外键  | 非空  | 默认值 |   索引   |       注释       |
| :--------: | :----------: | :---: | :---: | :---: | :----: | :------: | :--------------: |
|     id     |   int(11)    |   √   |       |   √   |        | 主键索引 |     文章编号     |
|  user_id   |   int(11)    |       |   √   |   √   |        |          |     用户编号     |
| project_id |   int(11)    |       |   √   |   √   |        |          |     项目编号     |
|   title    | varchar(255) |       |       |   √   |        |          |       标题       |
|  content   |     text     |       |       |       |        |          |       正文       |
|    uuid    |   char(36)   |       |       |   √   |        |          | 生成文章访问地址 |

## 2.5 模块表 module

|    名称     |     类型     | 主键  | 外键  | 非空  | 默认值 |   索引   |   注释   |
| :---------: | :----------: | :---: | :---: | :---: | :----: | :------: | :------: |
|     id      |   int(11)    |   √   |       |   √   |        | 主键索引 | 模块编号 |
| project_id  |   int(11)    |       |   √   |   √   |        |          | 项目编号 |
|    name     | varchar(255) |       |       |   √   |        |          | 模块名称 |
| description | varchar(255) |       |       |       | 空描述 |          | 模块描述 |
|    uuid     |   char(36)   |       |       |   √   |        |          | 预留字段 |

## 2.6 接口表 interfaces

|    名称     |     类型     | 主键  | 外键  | 非空  | 默认值 |   索引   |   注释   |
| :---------: | :----------: | :---: | :---: | :---: | :----: | :------: | :------: |
|     id      |   int(11)    |   √   |       |   √   |        | 主键索引 | 接口编号 |
|  module_id  |   int(11)    |       |   √   |   √   |        |          | 模块编号 |
|    name     | varchar(255) |       |       |   √   |        |          | 接口名称 |
| description | varchar(255) |       |       |       | 空描述 |          | 接口描述 |
|     url     | varchar(255) |       |       |   √   |        |          | 访问地址 |
|   method    |  tinyint(4)  |       |       |       |   0    |          | 请求类型 |
|    uuid     |   char(36)   |       |       |   √   |        |          | 预留字段 |

## 2.7 参数表 parameter

|     名称      |     类型     | 主键  | 外键  | 非空  | 默认值 |   索引   |           注释           |
| :-----------: | :----------: | :---: | :---: | :---: | :----: | :------: | :----------------------: |
|      id       |   int(11)    |   √   |       |   √   |        | 主键索引 |         参数编号         |
| interfaces_id |   int(11)    |       |   √   |   √   |        |          |         接口编号         |
|   parent_id   |   int(11)    |       |       |       |        |          |        父参数编号        |
|     name      | varchar(255) |       |       |   √   |        |          |         参数名称         |
|  description  | varchar(255) |       |       |       | 空描述 |          |         参数描述         |
|     type      |  tinyint(1)  |       |       |       |   0    |          | 参数类型：0-请求，1-响应 |
|   datatype    |  tinyint(4)  |       |       |       |   0    |          |         数据类型         |
|   necessary   |  tinyint(1)  |       |       |       |   1    |          |      0-可选，1-必选      |
|     rule      | varchar(255) |       |       |       |  NULL  |          |         生成规则         |


博客系统权限可以简单分为博主权限和普通用户权限，普通用户权限可以浏览文章，发表评论或者赞踩等，博主权限除此之外还可以添加文章，管理系统等。未登录用户只能浏览文章不能发表评论或者赞踩等。 

权限管理一般有三种常见的思路：利用Spring拦截器进行访问权限验证，利用Spring AOP进行访问权限验证和直接使用Spring Security集成模块进行访问权限验证。

利用Spring拦截器进行访问权限验证是通过拦截器在请求到达控制器之前拦截请求进行相应的权限验证。
利用Spring AOP进行访问权限验证是利用AOP切面编程的特点，可以在所有控制器函数内织入权限验证模块代码，当请求到达控制器之后会进行响应的权限验证。
Spring Security是Spring的一个集成的安全框架，其底层原理也是集成众多的拦截器对url进行拦截从而实现响应的权限管理。
三种实现权限管理的方法相比较之下，Spring Security作为一个框架使用简单功能完善但较为笨重；Spring AOP织入权限验证代码比较方便但是不够灵活；系统选用利用Spring拦截器进行访问权限验证，根据具体需求插入相应的拦截器，使用较为方便。
--------------------- 
作者：zhenyutu 
来源：CSDN 
原文：https://blog.csdn.net/u013967175/article/details/77449729 
版权声明：本文为博主原创文章，转载请附上博文链接！


网站应用一般使用Session进行登录用户信息的存储及验证，而在移动端使用Token则更加普遍。它们之间并没有太大区别，Token比较像是一个更加精简的自定义的Session。Session的主要功能是保持会话信息，而Token则只用于登录用户的身份鉴权。所以在移动端使用Token会比使用Session更加简易并且有更高的安全性，同时也更加符合RESTful中无状态的定义。

作者：王不哈
链接：https://www.jianshu.com/p/e2d5f299883a
来源：简书
简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。